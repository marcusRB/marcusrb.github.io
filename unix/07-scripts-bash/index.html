<!DOCTYPE html>
<html lang="es-ES">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.4.0">

  <title>Scripts de bash | MarcusRB</title>
    


  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Marco Russo">

  
  <meta name="robots" content="index,follow">

  
  
  
    
  
  <meta name="description" content="Un proceso es una instancia de un programa en ejecución. Programas y procesos son entidades distintas.">

  
  <link rel="alternate" hreflang="es-ES" href="https://www.marcusrb.com/unix/07-scripts-bash/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:200,500|Merriweather:200,300|Roboto+Mono:300,400&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.561c2ba69cc8c6babcfc0393b003a821.css">

  

  
  
  

  
  
    
    
    <script>
      var dataLayer = window.dataLayer = window.dataLayer || [];
      dataLayer.push({
        page:'Scripts de bash',
        categories:''
      });
    </script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MPFRNJ');</script>


    
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://www.marcusrb.com/unix/07-scripts-bash/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@rb_marcus">
  <meta property="twitter:creator" content="@rb_marcus">
  
  <meta property="og:site_name" content="MarcusRB | consultor &amp; profesor data analytics • AI • Big Data">
  <meta property="og:url" content="https://www.marcusrb.com/unix/07-scripts-bash/">
  <meta property="og:title" content="Scripts de bash | MarcusRB | consultor &amp; profesor data analytics • AI • Big Data">
  <meta property="og:description" content="Un proceso es una instancia de un programa en ejecución. Programas y procesos son entidades distintas."><meta property="og:image" content="https://www.marcusrb.com/img/icon-192.png">
  <meta property="twitter:image" content="https://www.marcusrb.com/img/icon-192.png"><meta property="og:locale" content="es-ES">
  
    
      <meta property="article:published_time" content="2020-06-24T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-01-31T16:11:35&#43;01:00">
  

  


  





</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  
  



    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPFRNJ" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>

  


  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Buscar</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Buscar..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    
      <a class="navbar-brand" href="/">MarcusRB</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Barra de navegación">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#inicio"><span>Inicio</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/servicios"><span>Servicios</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/cursos"><span>Cursos</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/recursos"><span>Recursos</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contactos"><span>Contactos</span></a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      





<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" placeholder="Buscar..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/tutorial-unix/">Índice UNIX</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/01-unix-intro/">Intro a Unix</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/02-sistema-ficheros/">Sistema de ficheros</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/03-control-procesos/">Control de procesos</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/04-flujo-informacion/">Flujo de información</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/05-procesamiento-texto/">Procesamiento texto</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/06-expresiones-regulares/">Expresiones regulares</a>

  </div>
  
  <div class="docs-toc-item active">
    <a class="docs-toc-link" href="/unix/07-scripts-bash/">Scripts de bash</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/08-administrador/">Administrador</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/09-administrador-software/">Administrador de software</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/10-variables-entorno/">Variables de entorno</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/11-administracion-software-2/">Administracion de software 2</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/unix/12-redes/">Redes</a>

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">En esta página</a></li>
      </ul>

      <nav id="TableOfContents">
<ul>
<li><a href="#scripts-de-bash">Scripts de bash</a>
<ul>
<li><a href="#variables">Variables</a>
<ul>
<li><a href="#nombre-de-las-variables">Nombre de las variables</a></li>
</ul></li>
<li><a href="#control-de-flujo">Control de flujo</a>
<ul>
<li><a href="#bucles-for">Bucles (<em>for</em>)</a></li>
<li><a href="#condicionales-if">Condicionales (<em>if</em>)</a>
<ul>
<li><a href="#condicionales-con-números">Condicionales con números</a></li>
<li><a href="#condicionales-con-cadenas-de-texto">Condicionales con cadenas de texto</a></li>
<li><a href="#condicionales-con-archivos">Condicionales con archivos</a></li>
</ul></li>
</ul></li>
<li><a href="#manipulación-de-cadenas-de-texto">Manipulación de cadenas de texto</a>
<ul>
<li><a href="#extraer-subcadena">Extraer subcadena</a></li>
<li><a href="#borrar-subcadena">Borrar subcadena</a></li>
<li><a href="#reemplazar-subcadena">Reemplazar subcadena</a></li>
</ul></li>
<li><a href="#operaciones-aritméticas">Operaciones aritméticas</a></li>
<li><a href="#parallel">Parallel</a></li>
<li><a href="#ejercicios">Ejercicios</a></li>
</ul></li>
</ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article" itemscope itemtype="http://schema.org/Article">

        <div class="docs-article-container">
          <h1 itemprop="name">Scripts de bash</h1>

          <div class="article-style" itemprop="articleBody">
            

<h1 id="scripts-de-bash">Scripts de bash</h1>

<ul>
<li>Variables

<ul>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#nombre-de-las-variables" target="_blank">Nombre de las variables</a></li>
</ul></li>
<li>Control de flujo

<ul>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#bucles-for" target="_blank">Bucles (<em>for</em>)</a></li>
<li>Condicionales (<em>if</em>)</li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#condicionales-con-nmeros" target="_blank">Condicionales con números</a></li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#condicionales-con-cadenas-de-texto" target="_blank">Condicionales con cadenas de texto</a></li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#condicionales-con-archivos" target="_blank">Condicionales con archivos</a></li>
</ul></li>
<li>Manipulación de cadenas de texto

<ul>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#extraer-subcadena" target="_blank">Extraer subcadena</a></li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#borrar-subcadena" target="_blank">Borrar subcadena</a></li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#reemplazar-subcadena" target="_blank">Reemplazar subcadena</a></li>
</ul></li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#operaciones-aritmticas" target="_blank">Operaciones aritméticas</a></li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#parallel" target="_blank">Parallel</a></li>
<li><a href="https://bioinf.comav.upv.es/courses/unix/scripts_bash.html#ejercicios" target="_blank">Ejercicios</a></li>
</ul>

<p>En esta sección del curso vamos a aprender a hacer algunos scripts  básicos que nos permitan automatizar y acelerar el trabajo. Un script no es más que un archivo que contiene un conjunto de órdenes para realizar una acción.</p>

<p>Vamos a crear nuestro primer script. Para ello en un editor de texto  escribiremos lo siguente y lo guardaremos con el nombre *hola.sh *</p>

<pre><code>	#!/bin/bash
	# Este es nuestro primer progrma
	echo Hola Mundo
</code></pre>

<p>A continuación iremos a la terminal y lo ejecutaremos:</p>

<pre><code> ~$ ./hola.sh.
</code></pre>

<p>La primera línea de nuestro script le indica al sistema que tiene que usar la shell BASH. La segunda línea es un comentario para consumo  humano, todas las líneas que comiencen por <code>#</code> son ignoradas por la máquina y nos sirven para incluir comentarios  destinados a programadores o usuarios. En la tercera línea tenemos el  comando <code>echo</code>que sirve para imprimir texto en la pantalla.</p>

<h2 id="variables">Variables</h2>

<p>Como cualquier otro lenguaje de programación, necesitamos variables  que nos servirán para guardar datos en la memoria del ordenador hasta el momento que los necesitemos. Podemos pensar en una variable como una  caja en la que podemos guardar un elemento (e.g, un número, una cadena  de texto, la dirección de un archivo…) y, siguiendo con el símil, la  memoria del ordenador no sería más que el conjunto de esas cajas.</p>

<p>Para asignar el valor a una variable simplemente simplemente debemos usar el signo <code>=</code>:</p>

<pre><code>nombre_variable=valor_variable
</code></pre>

<p>Es importante no dejar espacios ni antes ni después del <code>=</code>.</p>

<p>Para recuperar el valor de dicha variable sólo hay que anteponer el símbolo de dolar <code>$</code> antes del nombre de la variable:</p>

<pre><code>$nombre_variable
</code></pre>

<p>A lo largo de un script podemos asignarle diferentes valores a una misma variable:</p>

<pre><code>	#!/bin/bash
	to_print='Hola mundo'
	echo $to_print
	to_print=5.5
	echo $to_print
</code></pre>

<h3 id="nombre-de-las-variables">Nombre de las variables</h3>

<p>Las variables pueden tomar prácticamente cualquier nombre, sin embargo, existen algunas restricciones:</p>

<ul>
<li>Sólo puede contener caracteres alfanuméricos y guiones bajos</li>
<li>El primer carácter debe ser una letra del alfabeto o “_” (este último caso se suele reservar para casos especiales).</li>
<li>No pueden contener espacios.</li>
<li>Las mayúsculas y las minúsculas importan, “a” es distinto de “A”.</li>
<li>Algunos nombres som usado como variables de entorno y no los debemos utilizar para evitar sobrescribirlas (e.g.,PATH).</li>
</ul>

<p>De manera general, y para evitar problemas con las variables de  entorno que siempre están escritas en mayúscula, deberemos escribir el  nombre de las variables en minúscula.</p>

<p>Además, aunque esto no es una regla que deba obedecerse  obligatoriamente, es conveniente que demos a las variables nombres que  más tarde podamos recordar. Si abrimos un script tres meses después de haberlo escrito y nos  encontramos con la expresión “m=3.5” nos será difícil entender que hace  el programa. Habría sido mucho más claro nombrar la variable como “media=3.5”.</p>

<h2 id="control-de-flujo">Control de flujo</h2>

<p>Como hemos visto los scripts se ejecutan línea a línea hasta llegar  al final, sin embargo, muchas veces nos interesará modificar ese  comportamiento de manera que el programa pueda responder de un modo u  otro dependiendo de las cirscunstancias o pueda repetir trozos de  código.</p>

<p><img src="https://bioinf.comav.upv.es/courses/unix/static/for_if.png" alt="flow control" /></p>

<p>En este curso nos vamos a centrar en los controles de flujo más importantes:</p>

<ul>
<li>bucles (<em>for loops</em>)</li>
<li>condicionales (<em>if</em>)</li>
</ul>

<h3 id="bucles-for">Bucles (<em>for</em>)</h3>

<p>La sintaxis general de los bucles es la siguiente:</p>

<pre><code>for VARIABLE in LISTA_VALORES;
do
	COMANDO 1
	COMANDO 2
	...
	COMANDO N
done
</code></pre>

<p>Donde la lista de valores puede ser un rango númerico:</p>

<pre><code>	for VARIABLE in 1 2 3 4 5 6 7 8 9 10;
	for VARIABLE in {1..10};
</code></pre>

<p>una serie de valores:</p>

<pre><code>	for VARIABLE in file1 file2 file3;
</code></pre>

<p>o el resutlado de la ejecución de un comando:</p>

<pre><code>	for VARIABLE in $(ls /bin | grep -E 'c.[aeiou]');
</code></pre>

<p>Hay que tener en cuenta que si pasamos un listado de valores pero lo  ponemos entrecomillado, el ordenador lo enterá como un única línea:</p>

<pre><code>	for VARIABLE in &quot;file1 file2 file3&quot;;
</code></pre>

<p>Un ejemplo simple de <em>for</em> sería:</p>

<pre><code>	#!/bin/bash
	for numero in {1..20..2};
	do
	  echo Este es el número: $numero
	done
</code></pre>

<h3 id="condicionales-if">Condicionales (<em>if</em>)</h3>

<p>La sintaxis básica de un condicional es la siguiente</p>

<pre><code>	if [[ CONDICIÓN ]];
	then
	  COMANDO 1 si se cumple la condición
	fi
</code></pre>

<p>También se puede especificar qué hacer si la condición no se cumple:</p>

<pre><code>	if [[ CONDICIÓN ]];
	then
	  COMANDO 1 si se cumple la condición
	else
	  COMANDO 2 si no se cumple la condición
	fi
</code></pre>

<p>Incluso se pueden añadir más condiciones concatenando más <em>if</em>:</p>

<pre><code>	if [[ CONDICIÓN 1 ]];
	then
	  COMANDO 1 si se cumple la condición 1
	elif [[ CONDICIÓN 2 ]];
	then
	  COMANDO 2 si se cumple la condición 2
	else
	  COMANDO 3 si no se cumple la condición 2
	fi
</code></pre>

<h4 id="condicionales-con-números">Condicionales con números</h4>

<p>Al comparar números podemos realizar las siguientes operaciones:</p>

<table>
<thead>
<tr>
<th align="center">operador</th>
<th>significado</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">-lt</td>
<td>menor que (&lt;)</td>
</tr>

<tr>
<td align="center">-gt</td>
<td>mayor que (&gt;)</td>
</tr>

<tr>
<td align="center">-le</td>
<td>menor o igual que (&lt;=)</td>
</tr>

<tr>
<td align="center">-ge</td>
<td>mayor o igual que (&gt;=)</td>
</tr>

<tr>
<td align="center">-eq</td>
<td>igual (==)</td>
</tr>

<tr>
<td align="center">-ne</td>
<td>no igual (!=)</td>
</tr>
</tbody>
</table>

<pre><code>	#!/bin/bash
	num1=$1  # la variable toma el primer valor que le pasamos al script
	num2=$2  # la variable toma el segundo valor que le pasamos al script
	if [[ $num1 -gt $num2 ]];
	then
	  echo $num1 es mayor que $num2
	else
	  echo $num2 es mayor que $num1
	fi
</code></pre>

<h4 id="condicionales-con-cadenas-de-texto">Condicionales con cadenas de texto</h4>

<p>A la hora de comparar cadenas de texto:</p>

<table>
<thead>
<tr>
<th align="center">operador</th>
<th>significado</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">=</td>
<td>igual, las dos cadenas de texto son exactamente idénticas</td>
</tr>

<tr>
<td align="center">!=</td>
<td>no igual, las cadenas de texto no son exactamente idénticas</td>
</tr>

<tr>
<td align="center">&lt;</td>
<td>es menor que (en orden alfabético ASCII)</td>
</tr>

<tr>
<td align="center">&gt;</td>
<td>es mayor que (en orden alfabético ASCII)</td>
</tr>

<tr>
<td align="center">-n</td>
<td>la cadena no está vacía</td>
</tr>

<tr>
<td align="center">-z</td>
<td>la cadena está vacía</td>
</tr>
</tbody>
</table>

<pre><code>	#!/bin/bash
	string1='reo'
	string2='teo'
	if [[ $string1 &gt; $string2 ]];
	then
	  echo Eso es verdad
	else
	  echo Eso es mentira
	fi
</code></pre>

<p>También podemos hacer comparaciones haciendo uso de <em>wildcards</em>:</p>

<pre><code>	#!/bin/bash
	string1='reo'
	if [[ $string1 = *e* ]];
	then
	  echo Eso es verdad
	else
	  echo Eso es mentira
	fi
</code></pre>

<h4 id="condicionales-con-archivos">Condicionales con archivos</h4>

<table>
<thead>
<tr>
<th>operador</th>
<th>Devuelve <em>true</em> si</th>
</tr>
</thead>

<tbody>
<tr>
<td>-e name</td>
<td><em>name</em> existe</td>
</tr>

<tr>
<td>-f name</td>
<td><em>name</em> es un archivo normal (no es un directorio)</td>
</tr>

<tr>
<td>-s name</td>
<td><em>name</em> NO tiene tamaño cero</td>
</tr>

<tr>
<td>-d name</td>
<td><em>name</em> es un directorio</td>
</tr>

<tr>
<td>-r name</td>
<td><em>name</em> tiene permiso de lectura para el user que corre el script</td>
</tr>

<tr>
<td>-w name</td>
<td><em>name</em> tiene permiso de escritura para el user que corre el script</td>
</tr>

<tr>
<td>-x name</td>
<td><em>name</em> tiene permiso de ejecución para el user que corre el script</td>
</tr>
</tbody>
</table>

<p>Por ejemplo, podemos hacer un script que nos informe sobre el contenido de un directorio:</p>

<pre><code>	#!/bin/bash
	for file in $(ls);
	do
	  if [[ -d $file ]];
	  then
	    echo directorio: $file
	  else
	    if [[ -x $file ]];
	    then
	      echo archivo ejecutable: $file
	    else
	      echo archivo no ejecutable: $file
	    fi
	  fi
	done
</code></pre>

<h2 id="manipulación-de-cadenas-de-texto">Manipulación de cadenas de texto</h2>

<h3 id="extraer-subcadena">Extraer subcadena</h3>

<p>Mediante <code>${cadena:posicion:longitud}</code> podemos extraer una subcadena de otra cadena. Si omitimos :longitud,  entonces extraerá todos los caracteres hasta el final de cadena.</p>

<p>Por ejemplo en la cadena <code>string=abcABC123ABCabc</code>:</p>

<ul>
<li><code>echo ${string:0}</code> : abcABC123ABCabc</li>
<li><code>echo ${string:0:1}</code> : a (primer caracter)</li>
<li><code>echo ${string:7} :</code>  23ABCabc</li>
<li><code>echo ${string:7:3}</code> : 23A (3 caracteres desde posición 7)</li>
<li><code>echo ${string:7:-3}</code> : 23ABCabc (desde posición 7 hasta el final)</li>
<li><code>echo ${string: -4}</code> : Cabc (atención al espacio antes del menos)</li>
<li><code>echo ${string: -4:2}</code> : Ca (atención al espacio antes del menos)</li>
</ul>

<h3 id="borrar-subcadena">Borrar subcadena</h3>

<p>Hay diferentes formas de borrar subcadenas de una cadena:</p>

<ul>
<li><code>${cadena#subcadena}</code> : borra la coincidencia más corta de subcadena desde el principio de cadena</li>
<li><code>${cadena##subcadena}</code> : borra la coincidencia más larga de subcadena desde el principio de cadena</li>
</ul>

<p>Por ejemplo, en la cadena <code>string=abcABC123ABCabc</code>:</p>

<ul>
<li><code>echo ${string#a*C}</code> : 123ABCabc</li>
<li><code>echo ${string##a*C}</code> : abc</li>
</ul>

<h3 id="reemplazar-subcadena">Reemplazar subcadena</h3>

<p>También existen diferentes formas de reemplazar subcadenas de una cadena:</p>

<ul>
<li><code>${cadena/buscar/reemplazar}</code> : Sustituye la primera coincidencia de <em>buscar</em> con <em>reemplazar</em></li>
<li><code>${cadena//buscar/reemplazar}</code> : Sustituye todas las coincidencias de <em>buscar</em> con <em>reemplazar</em></li>
</ul>

<p>Por ejemplo, en la cadena <code>string=abcABC123ABCabc</code>:</p>

<ul>
<li><code>echo ${string/abc/xyz}</code> : xyzABC123ABCabc.</li>
<li><code>echo ${string//abc/xyz}</code> : xyzABC123ABCxyz.</li>
</ul>

<h2 id="operaciones-aritméticas">Operaciones aritméticas</h2>

<p>Por último, Bash también permite la operaciones aritméticas con número enteros:</p>

<ul>
<li><p>+ - : suma, resta</p>

<pre><code>~$ $num=10
~$ echo $((num + 2))
</code></pre></li>

<li><p>** : potencia</p>

<pre><code>~$ echo $((num ** 2))
</code></pre></li>

<li><p>* / % : multiplicación, división, resto (módulo)</p>

<pre><code>~$ echo $((num * 2))
~$ echo $((num / 2))
~$ echo $((num % 2))
</code></pre></li>

<li><p>VAR++ VAR– : post-incrementa, post-decrementa</p>

<pre><code>~$ echo $((num++))
~$ echo $num
</code></pre></li>

<li><p>++VAR –VAR : pre-incrementa, pre-decrementa</p>

<pre><code>~$ echo $((++num))
~$ echo $num
</code></pre></li>
</ul>

<h2 id="parallel">Parallel</h2>

<p><em>parallel</em> es un programa que permite la ejecución en paralelo de diferentes trabajos siempre que dispongamos de un ordenador o   ordenadores con más de un procesador.</p>

<p>Aunque este programa no tiene nada que ver con los scripts de Bash,   sí que hacer uso de éstos no resultará muy útil para preparar el archivo de entrada para <em>parallel</em>.  Este programa requiere pasarle un  archivo donde cada línea es trabajo a realizar y puede consistir tanto  en un comando como en un pequeño script a ejecutar. Y es ahí donde saber algo de scripting en Bash nos puede facilitar la tarea. Veamos un  ejemplo de <em>input</em> para <em>parallel</em>:</p>

<pre><code>	to_run.txt:
	zcat file1.fasta.gz | grep '&gt;' | sed 's/&gt;//' | bgzip &gt; sample_names1.txt.gz
	zcat file2.fasta.gz | grep '&gt;' | sed 's/&gt;//' | bgzip &gt; sample_names2.txt.gz
	zcat file3.fasta.gz | grep '&gt;' | sed 's/&gt;//' | bgzip &gt; sample_names3.txt.gz
	zcat file4.fasta.gz | grep '&gt;' | sed 's/&gt;//' | bgzip &gt; sample_names4.txt.gz
	zcat file5.fasta.gz | grep '&gt;' | sed 's/&gt;//' | bgzip &gt; sample_names5.txt.gz
	zcat file6.fasta.gz | grep '&gt;' | sed 's/&gt;//' | bgzip &gt; sample_names6.txt.gz
</code></pre>

<p><em>parallel</em> no viene instalado por defecto en algunas distribuciones Linux, por tanto, lo primero que debemos hacer es instalarlo:</p>

<pre><code>	~$ sudo apt-get install parallel
</code></pre>

<p>Con la opción <em>-j</em> podemos especificarle el número de trabajos simultáneos. Así pues, si tenemos 4 procesadores disponibles y queremos correr un trabajo por procesador correríamos:</p>

<pre><code>	~$ parallel -j 4 to_run.txt
</code></pre>

<h2 id="ejercicios">Ejercicios</h2>

<ol>
<li>Haz un script que cree 40 archivos <em>.txt</em> en una carpeta de tu escritorio (usa <em>touch</em> para crearlos)</li>
<li>Haz un script que comprima con <em>gzip</em> sólo los archivos 25 y 29.</li>
<li>Escribe un script que cambie la extensión de los ficheros que contengan un 3 en su nombre de <em>.txt</em> a <em>.md</em>.</li>
<li>Crea un script que copie todos los archivos (no directorios) <em>/etc</em> a una carpeta de tu escritorio.</li>
<li>Prepara un script que cuenta el número de directorios y archivos que hay en <em>/etc</em></li>
<li>Haz un script que devuelva el número de archivos que has guardado</li>
<li>Supon que tenemos un programa en Python llamado <em>scan_qtl.py</em> que requiere tres parámetros de entrada <em>a</em>, <em>b</em>. Queremos correr todas la combinaciones paramétricas posibles para <em>a</em> de 1 a 10 de 1 en 1 y <em>b</em> = [pop1, pop2, pop3, all]. Prepa el archivo de entrada para usar en <em>parallel</em>. La línea de ejecución del programa sería algo similar a <code>python scan_qtl.py 1 pop1 &gt; results.txt</code></li>
<li>En una nueva versión de <em>scan_qtl.py</em>, el programa admite un tercer parámetro <em>c</em> = [1, 10, 100 y 1000]. Prepara el archivo de entrada para usar en <em>parallel</em> con todas las combinaciones paramétricas de <em>a</em>, <em>b</em> y <em>c</em>. La línea de ejecución del programa sería algo similar a <code>python scan_qtl.py 1 pop1 100 &gt; results.txt</code></li>
</ol>

          </div>

          



          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Anterior</div>
    <a href="/unix/12-redes/" rel="next">Redes</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Siguiente</div>
    <a href="/unix/02-sistema-ficheros/" rel="prev">Sistema de ficheros</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Última actualización el Jan 31, 2021</p>

          
<p class="edit-page">
  <a href="https://github.com/gcushen/hugo-academic/edit/master/content/recursos/tutoriales/unix/07-scripts-bash.md">
    <i class="fas fa-pen pr-2"></i>Edit this page
  </a>
</p>



          

        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    &copy; 2021 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
  </p>
</footer>


    </main>
  </div>
</div>


      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js" integrity="sha256-0w92bcB21IY5+rGI84MGj52jNfHNbXVeQLrZ0CGdjNY=" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
    

    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Buscar...",
        'results': "resultados encontrados",
        'no_results': "No se encontraron resultados"
      };
      const content_type = {
        'post': "Posts",
        'project': "Proyectos",
        'publication' : "Publicaciones",
        'talk' : "Charlas"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    <script id="dsq-count-scr" src="https://marcusrb.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.4e51017b38c7ebaadd7e25fc9503f88c.js"></script>

    






  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Citar</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copiar
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Descargar
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
