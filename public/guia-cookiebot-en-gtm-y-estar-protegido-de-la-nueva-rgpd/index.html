<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.4.0">

  <title>[Guía] Cookiebot en GTM y estar protegido de la nueva RGPD | MarcusRB</title>
    


  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Marco Russo">

  
  <meta name="robots" content="index, follow">

  
  
  
    
  
  <meta name="description" content="Aquí la configuración optima con Google Tag Manager y CookieBot para estar protegido desde el 25 de Mayo con la nueva ley de protección de datos GDPR">

  
  <link rel="alternate" hreflang="en-us" href="https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Merriweather|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.561c2ba69cc8c6babcfc0393b003a821.css">

  

  
  
  

  
  
    
    
    <script>
      var dataLayer = window.dataLayer = window.dataLayer || [];
      dataLayer.push({
        page:'[Guía] Cookiebot en GTM y estar protegido de la nueva RGPD',
        categories:''
      });
    </script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MPFRNJ');</script>


    
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/">

  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@rb_marcus">
  <meta property="twitter:creator" content="@rb_marcus">
  
  <meta property="og:site_name" content="MarcusRB: consultor &amp; docente Data Analytics - BI - Machine Learning">
  <meta property="og:url" content="https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/">
  <meta property="og:title" content="[Guía] Cookiebot en GTM y estar protegido de la nueva RGPD | MarcusRB: consultor &amp; docente Data Analytics - BI - Machine Learning">
  <meta property="og:description" content="Aquí la configuración optima con Google Tag Manager y CookieBot para estar protegido desde el 25 de Mayo con la nueva ley de protección de datos GDPR"><meta property="og:image" content="https://www.marcusrb.com/img/img/2018/05/Cookierobots-cookiebot-para-Tag-Manager-marcusrb-blog-174x146.png">
  <meta property="twitter:image" content="https://www.marcusrb.com/img/img/2018/05/Cookierobots-cookiebot-para-Tag-Manager-marcusrb-blog-174x146.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2018-05-29T21:35:20&#43;00:00">
    
    <meta property="article:modified_time" content="2019-05-28T23:49:24&#43;02:00">
  

  


  





</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  
  



    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPFRNJ" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>

  


  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Buscar</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Buscar..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    
      <a class="navbar-brand" href="/">MarcusRB</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Barra de navegación">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Inicio</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/servicios"><span>Servicios</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses"><span>Cursos</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#recursos"><span>Recursos</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contactos</span></a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article" itemscope itemtype="http://schema.org/Article">

  









<div class="article-header">
  
  
  <img src="/img/img/2018/05/Cookierobots-cookiebot-para-Tag-Manager-marcusrb-blog-174x146.png" class="article-banner" itemprop="image" alt="">
  

  
</div>




  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">[Guía] Cookiebot en GTM y estar protegido de la nueva RGPD</h1>

  

  
    



<meta content="2018-05-29 21:35:20 &#43;0000 &#43;0000" itemprop="datePublished">
<meta content="2019-05-28 23:49:24 &#43;0200 CEST" itemprop="dateModified">

<div class="article-metadata">

  
  
  
  
  <div>
    



  <span itemprop="author name" itemtype="http://schema.org/Person"><a href="/authors/marcusrb/">marcusRB</a></span>

  </div>
  
  

  
  <span class="article-date">
    
    
      
          Última actualización el
      
    
    <time>May 28, 2019</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min de lectura
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/analitica-web/">Analítica Web</a>, <a href="/categories/tag-manager/">Tag Manager</a>, <a href="/categories/digital-marketing/">Digital Marketing</a></span>
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/&amp;text=[Gu%c3%ada]%20Cookiebot%20en%20GTM%20y%20estar%20protegido%20de%20la%20nueva%20RGPD" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/&amp;t=[Gu%c3%ada]%20Cookiebot%20en%20GTM%20y%20estar%20protegido%20de%20la%20nueva%20RGPD" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=[Gu%c3%ada]%20Cookiebot%20en%20GTM%20y%20estar%20protegido%20de%20la%20nueva%20RGPD&amp;body=https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/&amp;title=[Gu%c3%ada]%20Cookiebot%20en%20GTM%20y%20estar%20protegido%20de%20la%20nueva%20RGPD" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=[Gu%c3%ada]%20Cookiebot%20en%20GTM%20y%20estar%20protegido%20de%20la%20nueva%20RGPD%20https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://www.marcusrb.com/guia-cookiebot-en-gtm-y-estar-protegido-de-la-nueva-rgpd/&amp;title=[Gu%c3%ada]%20Cookiebot%20en%20GTM%20y%20estar%20protegido%20de%20la%20nueva%20RGPD" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<h2 id="aquí-la-configuración-optima-para-estar-protegido-desde-el-25-de-mayo-2018-con-la-nueva-ley-de-protección-de-datos-y-no-tener-problemas">Aquí la configuración optima para estar protegido desde el 25 de Mayo 2018 con la nueva ley de protección de datos y no tener problemas.</h2>

<p>Si estás aquí significa que ya has oído hablar del servicio CookieBot para administrar el GDPR en su sitio y le gustaría instalarlo con el Administrador de etiquetas de Google Tag Manager.</p>

<p>Tengo que darte dos noticias, una buena (¡hurra!) y una mala (¡doh!).</p>

<p>La buena noticia es que también hay una <strong>guía oficial de CookieBot</strong> sobre cómo instalarlo con Google Tag Manager (<a href="https://www.cookiebot.com/en/google-tag-manager-gdpr/" target="_blank">busque el enlace al final de esta guía</a>). Esto es bueno porque los propietarios del servicio han entendido que Google Tag Manager ahora es esencial para administrar el seguimiento en los sitios.</p>

<p>Pero desafortunadamente hay malas noticias. La mala noticia es que la guía indicada por ellos no funciona exactamente al 100%, ya que no tiene en cuenta algunos detalles del funcionamiento técnico de Google Tag Manager, por lo que pierde uno de los principales beneficios.</p>

<p>En otras palabras, la guía oficial va a crear fallas de funcionamiento que también afectarían a las otras etiquetas de su contenedor.</p>

<p>¿Qué detalle? Te lo contaré despúes de su guía oficial. En pocas palabras, probando la guía, pensando, probando, pensando y probando, a final no me gustó. Y decidí poner mi mano para resolver este problema.</p>

<p>Tengo que decir que gracias a otras guías de otros usuarios, finalmente pude con el, solo no hubiera logrado solucionarlo del todo. Así que logré hacerlo más poderoso sin perder el potencial de Google Tag Manager.</p>

<h3 id="ahora-voy-a-enumerar-lo-que-dice-la-guía-oficial-y-luego-lo-que-he-cambiado-y-cómo-lo-he-optimizado">Ahora voy a enumerar lo que dice la guía oficial y luego lo que he cambiado y cómo lo he optimizado.</h3>

<h4 id="paso-1-instale-el-script-con-una-etiqueta-html-personalizada">PASO 1: INSTALE EL SCRIPT CON UNA ETIQUETA HTML PERSONALIZADA</h4>

<p>Lo primero que la guía dice que haga, es instalar el script de JavaScript para que funcione.</p>

<p><strong>ATENCIÓN &#8211; </strong> deberá cambiar el <em>código de identificación</em> con el que tiene dentro del panel de CookieBot en la pestaña &#8220;Sus Scripts&#8221;:</p>

<p>Ahora que ha encontrado el código de su CookieBot, tendrá que insertarlo en una secuencia de comandos dentro de una etiqueta HTML personalizada.</p>

<p>El script es el siguiente:</p>

<pre>&lt;script id="Cookiebot" src="https://consent.cookiebot.com/uc.js?cbid=00000000-0000-0000-0000-000000000000" type="text/javascript"&gt;&lt;/script&gt;&lt;br /&gt;
&lt;script&gt;
function CookiebotCallback_OnAccept() {
    if (Cookiebot.consent.preferences)
        dataLayer.push({'event':'cookieconsent_preferences'});
    if (Cookiebot.consent.statistics)
        dataLayer.push({'event':'cookieconsent_statistics'});
    if (Cookiebot.consent.marketing)
        dataLayer.push({'event':'cookieconsent_marketing'});
}
&lt;/script&gt;</pre>

<p>ETIQUETAS &gt; Nuevo.</p>

<p>Tipo de etiqueta: HTML personalizado</p>

<p>Agregar ACTIVADORES &gt; &#8220;Todas las páginas&#8221;.</p>

<p>Guarde la etiqueta como: &#8220;Consentimiento de GDPR de CookieBot&#8221;.</p>

<p>¿Qué hace este script? sencillo</p>

<p>Cree tres eventos personalizados según la elección del usuario en las cookies:</p>

<p>_preferencias (cookieconsent<em>preferences)</em></p>

<p>_estadísticos (cookieconsent<em>statistics)</em></p>

<p>_marketing (cookieconsent<em>marketing)</em></p>

<p>Probablemente ya hayas adivinado el siguiente paso, ¿verdad?</p>

<p>&nbsp;</p>

<h4 id="paso-2-8211-crear-activadores">PASO 2 &#8211; CREAR ACTIVADORES</h4>

<p>Ahora que el script genera estos tres eventos personalizados, debemos capturarlos con tantos activadores de tipo de EVENTO PERSONALIZADO:</p>

<p>ACTIVADORES &gt; Nuevo</p>

<p>Tipo de activador: Evento Personalizado</p>

<p>Nombre del evento: cookieconsent_preferences.</p>

<p>Guarde con el nombre: &#8220;cookieconsent_preferences&#8221;.</p>

<p>Haremos lo mismo para los otros dos eventos:</p>

<p>_cookieconsent<em>statistics</em> y _cookieconsent<em>marketing</em></p>

<p>&nbsp;</p>

<h4 id="paso-3-8211-conecte-los-activadores-a-sus-etiquetas">PASO 3 &#8211; CONECTE LOS ACTIVADORES A SUS ETIQUETAS</h4>

<p>Ahora que hemos creado tres eventos, tenemos que eliminar los activadores de tipo &#8220;Página vista&#8221; (es decir, Window Loaded, DOM Ready y PageView) encontrado previamente en la etiqueta, y reemplazarlos con tres eventos que hemos creado .</p>

<p>Por ejemplo, puede vincularlos a estas etiquetas:</p>

<p>Etiqueta principal de Google Analytics de páginas vistas</p>

<p>Facebook Pixel</p>

<p>Hotjar</p>

<p>Remarketing de AdWords</p>

<p>y así para el resto de etiquetas que afecten a las cookie de marketing y de social, por ejemplo.</p>

<p>A continuación se muestra un ejemplo de la página de Google Analytics.</p>

<p><a href="https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM.png" target="_blank"><img class="aligncenter size-full wp-image-592" src="https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM.png" alt="" width="992" height="607" srcset="https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM.png 992w, https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM-300x184.png 300w, https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM-768x470.png 768w, https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM-239x146.png 239w, https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM-50x31.png 50w, https://www.marcusrb.com/img/2018/05/Screen-Shot-2018-05-27-at-9.50.24-PM-123x75.png 123w" sizes="(max-width: 992px) 100vw, 992px" /></a></p>

<h4 id="paso-4-actualiza-activadores-personalizados">PASO 4: ACTUALIZA ACTIVADORES PERSONALIZADOS</h4>

<p>Pero, ¿cómo gestionamos todos los demás activadores, cómo un Activador en la página de privacidad (en su guía, haga este ejemplo, pero para hacerle entender que podría ser un Activador de la página de agradecimiento)?</p>

<p>La guía oficial nos dice que agreguemos el evento como un parámetro de filtro de activador:</p>

<p><a href="https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers-.png" target="_blank"><img class="aligncenter size-full wp-image-593" src="https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers-.png" alt="" width="836" height="569" srcset="https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers-.png 836w, https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers--300x204.png 300w, https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers--768x523.png 768w, https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers--215x146.png 215w, https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers--50x34.png 50w, https://www.marcusrb.com/img/2018/05/Controlling-cookies-with-multiple-triggers--110x75.png 110w" sizes="(max-width: 836px) 100vw, 836px" /></a></p>

<h4 id="paso-5-8211-actualiza-todos-los-activadores">PASO 5 &#8211; ACTUALIZA TODOS LOS ACTIVADORES</h4>

<p>Pero si tengo que administrar otros activadores, como clics o un enlace, ¿entonces, cómo lo hago?</p>

<p>La guía sugiere que creemos <strong>variables de JavaScript personalizadas</strong> que detectarán las opciones de los usuarios sobre los tipos de cookies que desean recibir.</p>

<p><strong>Variables</strong> &gt; Variables definidas por el usuario &gt; Nuevo</p>

<p>Tipo de variable: JavaScript personalizado</p>

<p>Nombre de la variable: Cookiebot.consent.marketing</p>

<p>Ingrese el siguiente código y luego guarde</p>

<pre>function()&lt;br /&gt;
{&lt;br /&gt;
return Cookiebot.consent.marketing.toString()&lt;br /&gt;
}</pre>

<p>Lo mismo puede ser replicado por las preferencias y estadísticas</p>

<p><em>Cookiebot.consent.preferences.toString()</em></p>

<p><em>Cookiebot.consent.statistics.toString()</em></p>

<p>La función devolverá verdadero o falso <strong>TRUE </strong>o <strong>FALSE</strong></p>

<p>El problema con esta versión es que JavaScript recibirá el valor solo después del evento Window Loaded (ventana cargada) y luego todas las etiquetas se deben administrar DESPUÉS del evento Window Loaded.</p>

<p>Como puede ver en la Vista de página y DOM Ready aún no está definido.</p>

<p>&nbsp;</p>

<p>En la práctica, perdemos todos los eventos nativos de Google Tag Manager (Vista de página y DOM Ready) porque tendremos que activar las etiquetas solo DESPUÉS de COMPROBAR la variable de tipo JavaScript.</p>

<p>###</p>

<p><strong>Por qué esta guía no está bien?</strong></p>

<p>Me parece absurdo tener que renunciar a Page View y DOM Ready, ya que van a estropear los eventos personalizados conectados a ellos.</p>

<p>En otras palabras, <strong>la guía propuesta por Cookiebot no está funcionando.</strong> Y esto no sería muy útil para aquellos que ya están utilizando desde hace años Google Tag Manager y tener que volver a re-escribir nuevamente códigos.</p>

<p>Véamos como funciona el atajo, gracias a Matteo Zambon donde se puede ver desde su <a href="https://www.tagmanageritalia.it/how-to-fix-cookiebot-official-guide-and-protect-yourself-from-gdpr/" target="_blank">post en inglés de GDPR</a>, el aporte a esta solución para los usuarios de Cookiebot y Tag Manager.</p>

<p>Gracias Matteo!</p>

<p>&nbsp;</p>

<h3 id="ahora-voy-a-enumerar-los-nuevos-pasos-optimizados">Ahora voy a enumerar los nuevos pasos optimizados</h3>

<h4 id="nuevo-paso-1-8211-crear-variables-de-cookiebot">nuevo PASO 1 &#8211; CREAR VARIABLES DE COOKIEBOT</h4>

<p>Antes que nada, crea una variable que contenga el código de tu <strong>CookieBot Id</strong> que hemos tomado con el PASO 1 anterior.</p>

<p>&nbsp;</p>

<p>Variables &gt; Variables definidas por el usuario&gt; Nuevo</p>

<p>Tipo de variable: constante</p>

<p>Nombre de la variable: CookieBotId</p>

<p>Valor: ingrese el valor de su identificación</p>

<p>Guardar</p>

<p>Ahora necesitaremos <strong>cuatro variables personalizadas</strong> más:</p>

<p><em>CookieConsent</em></p>

<p><em>CookieConsent.marketing</em></p>

<p><em>CookieConsent.preferences</em></p>

<p><em>CookieConsent.statistics</em></p>

<h4 id="nuevo-paso-2-crear-la-varible-cookie">nuevo PASO 2: CREAR LA VARIBLE COOKIE</h4>

<p>La CookieBot dispone de una cookie que contiene los valores de las opciones del usuario: <strong>CookieConsent</strong></p>

<p>En este punto, sólo tenemos que tomar esa &#8220;galleta&#8221; con Google Administrador de etiquetas a través de una variable. Hacerlo es lo suficientemente simple</p>

<p>Variables&gt; Variables definidas por el usuario&gt; Nuevo.</p>

<p>Tipo de variable: cookie propietaria</p>

<p>Nombre de la variable: CookieConsent</p>

<p>Nombre de la cookie: &#8220;CookieConsent&#8221;</p>

<p>Guardar</p>

<h4 id="nuevo-paso-3-crear-variables-de-consideración">nuevo PASO 3: CREAR VARIABLES DE CONSIDERACIÓN</h4>

<p>Ahora que tenemos una variable que contiene las preferencias de cookies podemos crear tres variables para manejar los valores. Para hacerlo, usaremos un poco de astucia y expresiones regulares</p>

<p>Variables&gt; Variables definidas por el usuario&gt; Nuevo.</p>

<p>Tipo de variable: tabla de expresiones regulares</p>

<p>Valor de entrada: {{CookieConsent}}</p>

<p>Patrón: marketing: verdadero ► Salida: verdadero</p>

<p>Patrón: marketing: falso ► Salida: falso</p>

<p>Configuración avanzada: solo marca ignorar mayúsculas y minúsculas</p>

<p>Nombre de la variable: CookieConsent.marketing</p>

<p>Guardar</p>

<p>Vamos a repetir el mismo procedimiento para las otras dos CookieConsent.statistics y variables CookieConsent.preferences, teniendo cuidado incluso cambiar los valores en el campo &#8220;Patrón&#8221;.</p>

<p>Pero ¿Por qué estas variables?</p>

<p>Uhhh &#8230; espera, ahora te lo diré.</p>

<p>Tendremos el valor de la preferencia del usuario mucho antes de la ventana cargada. En otras palabras, no habrá problemas en la gestión de Google Administrador de etiquetas de eventos predefinidos.</p>

<p>Yuppieeeeeeee!</p>

<p>&nbsp;</p>

<h4 id="nuevo-paso-4-8211-instala-el-guión-con-una-etiqueta-html-personalizado">nuevo PASO 4 &#8211; Instala el guión con una etiqueta HTML personalizado</h4>

<p>El procedimiento es similar al primer mal paso, pero con algunos cambios para instalar la secuencia de comandos es la siguiente:</p>

<p><em>Tipo de etiqueta:</em> <strong>HTML personalizado</strong></p>

<p><em>Configuración avanzada</em>: opciones de activación de etiqueta: &#8220;<strong>Una vez por página</strong>&#8221;</p>

<p><em>Activadores</em>: <strong>&#8220;Todas las páginas&#8221;</strong>.</p>

<p>Guarde la etiqueta como &#8220;CookieBot GDPR consentimiento&#8221;.</p>

<p>VEMOS EN EL DETALLE LO QUE HA SIDO CAMBIADO.</p>

<p>Primero me puse esta etiqueta se activa sólo una vez por página (por lo que se evita que se carguen dos veces).</p>

<p>Pasemos al segundo cambio. Si ha notado añadí otra condición antes de cada impulso en la capa de datos. De esta manera, ahora hay dos condiciones:</p>

<p>la primera condición comprueba la existencia de la función de JavaScript</p>

<p>la segunda condición ocurre que ya ha sido registrada y el CookieConsent que el valor es diferente de verdaderos (gracias a las Tablas expresiones regulares ya creados).</p>

<p>En otras palabras, el evento personalizado se inserta en la pila sólo si el usuario ya posee CookieConsent (y por lo tanto ya ha expresado su preferencia sobre qué tipo de cookies para aceptar) y si ese tipo de cookie (preferencias, estadísticas o comercialización) no fue aceptado.</p>

<p>Por qué esto? Lo explicaré en los siguientes pasos.</p>

<p>&nbsp;</p>

<h4 id="nuevo-paso-5-8211-create-el-activador-igual-a-la-etapa-2">nuevo PASO 5 &#8211; CREATE el activador (igual a la etapa 2)</h4>

<p>Este fue el único paso realmente útil en la guía anterior.</p>

<p>Ahora que la secuencia de comandos genera estos tres eventos personalizados tenemos que cogerlos con la mayor cantidad de activadores de tipo Evento personalizado.</p>

<p>Activadores&gt; Nuevo.</p>

<p>Tipo de activador: evento personalizado.</p>

<p>Nombre del evento: cookieconsent_preferences.</p>

<p>Guarde con el nombre: &#8220;cookieconsent_preferences&#8221;.</p>

<p>Vamos a hacer lo mismo para los otros dos eventos: cookieconsent_statistics y cookieconsent_marketing</p>

<p>####</p>

<h4 id="paso-6-crear-activadores-negativos">PASO 6: CREAR ACTIVADORES NEGATIVOS</h4>

<p>Además de los PASO 5 Activadores, debemos crear activadores con lógica inversa.</p>

<p>Generalmente los llamo activadores negativos. Tendremos que ponerlos como los activadores de tipo de excepción en las etiquetas más comunes.</p>

<p><em>Tipo de activador</em>: <strong>Visualización de página</strong>.</p>

<p><em>Este activador se activa en</em>: <strong>algunas vistas de página</strong>.</p>

<p>_Activar este activado_r: <strong>CookieConsent.marketing</strong> no es igual a <strong>TRUE</strong></p>

<p>Guardar como: &#8220;Fail cookieconsent_marketing&#8217;.</p>

<p>Haremos lo mismo para las estadísticas y preferencias.</p>

<p>¿Cómo generar universal negativa ACTIVADOR DE válidas para ningún EN TODO MOMENTO</p>

<p>El ejemplo que acabamos de ver se aplica solo a la vista de página. Pero si tuviera las etiquetas que se activan al hacer clic o cualquier otro tipo de activador como lo hacemos?</p>

<p>Ahora te lo explicaré</p>

<p>Activadores&gt; Nuevo.</p>

<p>Tipo de activador: evento personalizado</p>

<p>Nombre del evento :. *</p>

<p>Indicador Utiliza coincidencia de expresión regular: verdadero</p>

<p>Este disparador se activa en CookieConsent.preference no es igual a la verdadera</p>

<p>Guardar con el nombre: &#8220;CookieConsente.preference&#8221;</p>

    </div>

    


    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/rgpd/">rgpd</a>
  
  <a class="badge badge-light" href="/tags/cookies/">cookies</a>
  
  <a class="badge badge-light" href="/tags/cookiebot/">cookiebot</a>
  
  <a class="badge badge-light" href="/tags/alerta-cookie-tag-manager/">alerta cookie tag manager</a>
  
</div>



    
      








  
  
    
  
  





  
  
  
  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="/authors/marcusrb/"></a></h5>
      
      
      <ul class="network-icon" aria-hidden="true">
        
      </ul>
    </div>
  </div>



      
      
    

    

    


  </div>
</article>

      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js" integrity="sha256-0w92bcB21IY5+rGI84MGj52jNfHNbXVeQLrZ0CGdjNY=" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
    

    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Buscar...",
        'results': "resultados encontrados",
        'no_results': "No se encontraron resultados"
      };
      const content_type = {
        'post': "Posts",
        'project': "Proyectos",
        'publication' : "Publicaciones",
        'talk' : "Charlas"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.4e51017b38c7ebaadd7e25fc9503f88c.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    &copy; 2019 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Citar</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copiar
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Descargar
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
